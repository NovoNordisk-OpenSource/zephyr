<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Structured Messages and Options • zephyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Structured Messages and Options">
<meta name="description" content="Provides a structured framework for consistent user communication and configuration management for package developers.">
<meta property="og:description" content="Provides a structured framework for consistent user communication and configuration management for package developers.">
<meta property="og:image" content="https://novonordisk-opensource.github.io/zephyr/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">zephyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/novonordisk-opensource/zephyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="zephyr-">zephyr 
<a class="anchor" aria-label="anchor" href="#zephyr-"></a>
</h1>
</div>
<!-- badges: start -->

<!-- badges: end -->
<p>The zephyr package provides small functionalities for developers of R packages to inform users about progress and issues, while at the same time allowing the users to easily configure the amount of information they want to receive.</p>
<p>zephyr also has utilities to create, get, and document options used in your packages.</p>
<p>The zephyr package is designed and intended for use within other R packages developed and published under the <a href="https://novonordisk-opensource.github.io/R-packages/" class="external-link">Novo Nordisk Open Source</a> ecosystem.</p>
<p>For packages outside our ecosystem, we recommend using the <a href="https://cran.r-project.org/package=options" class="external-link">options</a> package<br>
instead for a more complete implementation of package options.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the released version from CRAN:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"zephyr"</span><span class="op">)</span></span>
<span><span class="co"># Install the development version from GitHub:</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"NovoNordisk-OpenSource/zephyr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-zephyr">Use zephyr<a class="anchor" aria-label="anchor" href="#use-zephyr"></a>
</h2>
<p>The easiest way to use zephyr in your package is to set it up with the <code><a href="reference/use_zephyr.html">use_zephyr()</a></code> function.</p>
<p>This creates a new script <code>R/{pkgname}-options.R</code> with all the relevant boilerplate code to use zephyr options in the package.</p>
<p>It adds the <code>verbosity_level</code> option, that the user can change to configure the amount of information. For more information and the different levels see <code><a href="reference/verbosity_level.html">?verbosity_level</a></code>.</p>
<p>New options in your package can be added with <code><a href="reference/create_option.html">create_option()</a></code> and used afterwards with <code><a href="reference/get_option.html">get_option()</a></code> inside your functions. Documentation is automatically generated with <code><a href="reference/list_options.html">list_options()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="messages-and-verbosity">Messages and verbosity<a class="anchor" aria-label="anchor" href="#messages-and-verbosity"></a>
</h2>
<p>The backbone of zephyr is the <code><a href="reference/msg.html">msg()</a></code> and friends functions. They are to be used inside your functions to give consistent levels of information to your users.</p>
<p>The main functions are:</p>
<ul>
<li>
<code><a href="reference/msg.html">msg_success()</a></code>: To show the success of a long or complicated operation.</li>
<li>
<code><a href="reference/msg.html">msg_danger()</a></code>: To show a failed operation. Note this is not throwing an error. Use <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_abort()</a></code> in that case.</li>
<li>
<code><a href="reference/msg.html">msg_warning()</a></code>: To indicate a warning.</li>
<li>
<code><a href="reference/msg.html">msg_info()</a></code>: To give detailed information.</li>
<li>
<code><a href="reference/msg.html">msg_debug()</a></code>: To give debugging information.</li>
</ul>
<p>These functions are already wrapped around the appropriate {cli} functions and the relevant <code>verbosity_level</code>.</p>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<p>Let’s say we have a function that does some long and complicated calculations, and creates some output. We want to use zephyr <code><a href="reference/msg.html">msg()</a></code> functions to inform the user of the progress and the result.</p>
<p>A skeleton to use for that function could be the <code>foo()</code> function below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="reference/msg.html">msg_debug</a></span><span class="op">(</span><span class="st">"Some important debug information about the function"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="reference/msg.html">msg_info</a></span><span class="op">(</span><span class="st">"Starting calculations"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span> <span class="co"># Replace with long calculations and how to create output</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">result</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/msg.html">msg_success</a></span><span class="op">(</span><span class="st">"Output created"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/msg.html">msg_danger</a></span><span class="op">(</span><span class="st">"Output not created correctly"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Here we first provide some debugging information if requested. Then we inform that the calculations are starting. After the calculations, we inform the user if the output was created correctly or not.</p>
<p>The default <code>verbosity_level</code> in zephyr is <code>verbose</code> which displays all messages expect debugging:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ Starting calculations</span></span>
<span><span class="co">#&gt; ✔ Output created</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>With <code>verbosity_level = "minimal"</code> only <code><a href="reference/msg.html">msg_success()</a></code> and <code><a href="reference/msg.html">msg_danger()</a></code> messages are shown:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">with_options</a></span><span class="op">(</span></span>
<span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>zephyr.verbosity_level <span class="op">=</span> <span class="st">"minimal"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Output created</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>And they can be turned off completely with <code>verbosity_level = "quiet"</code>, while <code>verbosity_level = "debug"</code> gives all messages:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">with_options</a></span><span class="op">(</span></span>
<span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>zephyr.verbosity_level <span class="op">=</span> <span class="st">"quiet"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">with_options</a></span><span class="op">(</span></span>
<span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>zephyr.verbosity_level <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span>,</span>
<span>  code <span class="op">=</span> <span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; → Some important debug information about the function</span></span>
<span><span class="co">#&gt; ℹ Starting calculations</span></span>
<span><span class="co">#&gt; ✔ Output created</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/novonordisk-opensource/zephyr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/novonordisk-opensource/zephyr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing zephyr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Aksel Thomsen <br><small class="roles"> Author, maintainer </small>  </li>
<li>Mathias Lerbech Jeppesen <br><small class="roles"> Author </small>  </li>
<li>Cervan Girard <br><small class="roles"> Author </small>  </li>
<li>Kristian Troejelsgaard <br><small class="roles"> Author </small>  </li>
<li>Lovemore Gakava <br><small class="roles"> Author </small>  </li>
<li>Steffen Falgreen Larsen <br><small class="roles"> Author </small>  </li>
<li>Vladimir Obucina <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/NovoNordisk-OpenSource/zephyr/actions/workflows/check_and_co.yaml" class="external-link"><img src="https://github.com/NovoNordisk-OpenSource/zephyr/actions/workflows/check_and_co.yaml/badge.svg" alt="Checks"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aksel Thomsen, Mathias Lerbech Jeppesen, Cervan Girard, Kristian Troejelsgaard, Lovemore Gakava, Steffen Falgreen Larsen, Vladimir Obucina.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
